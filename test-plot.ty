#import "plot.ty": plot, plot-data, plot-axis, plot-tics

#let plot-fn(fn, min: -1, max: 1, steps: 100) = {
   let data = ()
   for n in range(0, steps + 1) {
     let x = min + (max - min) / steps * n
     data.push((x, fn(x)))
   }
   return data
}

#figure(caption: [Simple plot])[
  #plot(plot-data(plot-fn(min: -2, max: 2, x => { return calc.pow(x, 3) })),
    x-axis: plot-axis(range: (-1.2, 1.2)), 
    y-axis: plot-axis(range: (-2, 2)),
    y-tics: plot-tics(every: 1),
    x-tics: plot-tics(every: 1),
    width: 10cm,
    height: 3cm)
  ]

#figure(caption: [Multiple Axes])[
  #plot((plot-data(plot-fn(min: 0, max: 2*calc.pi, steps: 40, { x => calc.sin(x) }), x-axis: "x"), 
         plot-data(plot-fn(min: 0, max: 2*calc.pi, steps: 40, { x => calc.cos(x) }), x-axis: "x2")), 
         multi:true,
    width: 10cm, height: 5cm, 

    x-axis: plot-axis(range: (-1, calc.pi * 2 + 1)),
    x-tics: plot-tics(stroke: black, every: calc.pi, tics: (calc.pi/2,),
	              mirror: false,
		      format: v => {return str(v/calc.pi) + math.pi}),

    y-axis: plot-axis(range: (-2, 2)),
    y-tics: plot-tics(stroke: green + .5pt, tics: (0, 1, 2)),

    x2-axis: plot-axis(range: (0, calc.pi * 2 )),
    x2-tics: plot-tics(stroke: red + .5pt, every: 1.5, mirror: false),)
]
